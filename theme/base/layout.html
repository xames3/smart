<!--
SMART Sphinx Theme ToC Template
===============================

Author: Akshay Mestry <xa@mes3.dev>
Created on: Friday, 21 February 2025
Last updated on: Wednesday, 10 September 2025
-->
{%- set lang_attr = "en" if language == None else (language|replace('_','-')) -%}
<!DOCTYPE html>
<html lang="{{ lang_attr }}"
      {% if sphinx_version_tuple>= (7, 2) %}data-content_root="{{ content_root }}"{% endif %}
      :data-theme="darkMode"
      x-data="{darkMode: localStorage.getItem('darkMode') ?? 'dark'}"
      x-init="if (!localStorage.getItem('darkMode')) localStorage.setItem('darkMode', darkMode); $watch('darkMode', val => { if (window.smartApplyTheme) smartApplyTheme(val); else { document.documentElement.classList.add('theme-transition'); requestAnimationFrame(()=>{ document.documentElement.setAttribute('data-theme', val); setTimeout(()=>document.documentElement.classList.remove('theme-transition'), 700); }); } localStorage.setItem('darkMode', val); })"
      class="scroll-smooth"
      :class="{'dark': darkMode === 'dark' || (darkMode === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)}"
      x-effect="document.documentElement.setAttribute('data-theme', darkMode)">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta name="theme-color"
          media="(prefers-color-scheme: light)"
          content="white" />
    <meta name="theme-color"
          media="(prefers-color-scheme: dark)"
          content="black" />
    {{ metatags }}
    <script>
    document.documentElement.classList.add('no-transitions');
    const userPreference = localStorage.getItem('darkMode');
    const mode = userPreference || 'dark';
    document.documentElement.setAttribute('data-theme', mode);
    if (mode === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
    if (!userPreference) { localStorage.setItem('darkMode', mode) }
    </script>
    {%- block htmltitle %}
      <title>{{ title|striptags|e if title else docstitle }}</title>
      <meta property="og:title"
            content="{{ title|striptags|e if title else docstitle }}" />
      <script src="https://kit.fontawesome.com/8bcdaaff4d.js"
              crossorigin="anonymous"></script>
      <script data-goatcounter="https://smart.goatcounter.com/count"
              async
              src="//gc.zgo.at/count.js"></script>
    {%- endblock htmltitle %}
    {%- for css in css_files %}
      {%- if css|attr("filename") %}
        {{ css_tag(css) }}
      {%- else -%}
        <link rel="stylesheet" href="{{ pathto(css, 1) |e }}" />
      {%- endif %}
    {%- endfor %}
    {%- if docsearch %}
      <link rel="preconnect"
            href="https://{{ docsearch_app_id }}-dsn.algolia.net"
            crossorigin="anonymous" />
    {% endif %}
    {%- set _favicon_url = favicon_url | default(pathto('_static/' + (favicon or ""), 1)) %}
    {%- if favicon_url or favicon %}<link rel="icon" href="{{ _favicon_url }}" />{%- endif %}
    {%- block linktags %}
      {%- if hasdoc('search') and not docsearch %}
        <link rel="search" title="{{ _('Search') }}" href="{{ pathto('search') }}" />
      {%- endif %}
      {%- if hasdoc('genindex') %}<link rel="index" title="{{ _('Index') }}" href="{{ pathto('genindex') }}" />{%- endif %}
      {%- if next %}
        <link rel="next"
              title="{{ next.title|striptags|e }}"
              href="{{ next.link|e }}" />
      {%- endif %}
      {%- if prev %}
        <link rel="prev"
              title="{{ prev.title|striptags|e }}"
              href="{{ prev.link|e }}" />
      {%- endif %}
    {%- endblock linktags %}
    {%- block extrahead %}{%- endblock extrahead %}
    </head>
    <body x-data="{ showSidebar: false, showScrollTop: false, lastScroll: 0 }"
          class="min-h-screen font-sans antialiased bg-background text-foreground"
          :class="{ 'overflow-hidden': showSidebar }"
          @scroll.window="const y=pageYOffset; const docH=document.documentElement.scrollHeight; const nearBottom=(y+innerHeight)>= (docH-200); const down=y>lastScroll; showScrollTop = down && (y>200 || nearBottom); lastScroll = y < 0 ? 0 : y;">
      {%- if sidebars|length > 0 %}
        <div x-cloak
             x-show="showSidebar"
             class="fixed inset-0 z-50 overflow-hidden bg-background/80 backdrop-blur-sm md:hidden sidebar-backdrop"
             @click.self="showSidebar = false"></div>
      {%- endif %}
      <div id="page" class="relative flex flex-col min-h-screen">
        <a href="#content"
           class="absolute top-0 left-0 z-[100] block bg-background p-4 text-xl transition -translate-x-full opacity-0 focus:translate-x-0 focus:opacity-100">
          Skip to content
        </a>
        {%- block header %}
          {%- include "header.html.jinja" %}
        {%- endblock header %}
        <div class="flex-1">
          <div class="container flex-1 layout-grid md:gap-6 lg:gap-10 has-right-sidebar">
            {%- block sidebar %}
              {%- if sidebars|length > 0 %}
                {%- include "sidebar.html.jinja" %}
              {%- endif %}
            {%- endblock sidebar %}
            {%- block main %}
              <main class="relative py-6 lg:gap-10 lg:py-8">
                {%- block body %}{%- endblock %}
                  {%- trans last_updated_body=last_updated_body|e -%}
                  <p class="text-sm text-muted-foreground mt-12"
                     style="margin-left: 0.45rem">
                    Last updated {{ last_updated_body
                    }}
                  </p>
                {%- endtrans -%}
              </main>
            {%- endblock main %}
            {%- block right_sidebar %}
              {%- include "toc.html.jinja" %}
            {%- endblock right_sidebar %}
          </div>
        </div>
        {%- if theme_show_previous_next_pages|tobool %}
          {%- include "previous_next_pages.html.jinja" %}
        {%- endif %}
        {%- block footer %}
          {%- include "footer.html.jinja" %}
        {%- endblock footer %}
      </div>
      {% block scripts %}
        {%- for js in script_files %}{{ js_tag(js) }}{%- endfor %}
          <script>
    window.addEventListener('load', function () {
      requestAnimationFrame(function () {
        document.documentElement.classList.remove('no-transitions');
      });
    });
          </script>
        {% endblock scripts %}
      </body>
    </html>
